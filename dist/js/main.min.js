!function(){"use strict";function e(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"===t)return;const r=t.substring(1),s=document.getElementById(r);if(s){e.preventDefault(),s.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState&&history.pushState(null,null,t);const r=document.querySelector(".main-nav");if(r&&r.classList.contains("active")){r.classList.remove("active");const e=document.querySelector(".menu-toggle");e&&e.setAttribute("aria-expanded","false")}}})}),function(){const e=document.querySelector(".site-header"),t=document.querySelector(".main-nav");if(!e||!t)return;const r=document.createElement("button");r.className="menu-toggle",r.setAttribute("aria-label","Toggle navigation menu"),r.setAttribute("aria-expanded","false"),r.innerHTML='<span class="menu-icon"></span>',t.parentNode.insertBefore(r,t),r.addEventListener("click",function(){const e="true"===this.getAttribute("aria-expanded");t.classList.toggle("active"),this.setAttribute("aria-expanded",!e),this.classList.toggle("active")}),document.addEventListener("click",function(e){t.contains(e.target)||r.contains(e.target)||t.classList.contains("active")&&(t.classList.remove("active"),r.classList.remove("active"),r.setAttribute("aria-expanded","false"))}),document.addEventListener("keydown",function(e){"Escape"===e.key&&t.classList.contains("active")&&(t.classList.remove("active"),r.classList.remove("active"),r.setAttribute("aria-expanded","false"),r.focus())})}(),function(){const e=document.querySelectorAll("main section[id]"),t=document.querySelectorAll('.main-nav a[href^="#"]');if(0===e.length||0===t.length)return;function r(){let r="";e.forEach(e=>{const t=e.offsetTop;e.clientHeight,window.pageYOffset>=t-100&&(r=e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")==="#"+r&&e.classList.add("active")})}let s=!1;window.addEventListener("scroll",function(){s||(window.requestAnimationFrame(function(){r(),s=!1}),s=!0)}),r()}(),function(){const e=document.getElementById("contact-form");if(!e)return;const t=e.querySelector(".form-status");function r(e){const t=e.querySelectorAll("[required]");let r=!0;t.forEach(e=>{"checkbox"===e.type?e.checked?e.parentElement.classList.remove("error"):(r=!1,e.parentElement.classList.add("error")):e.value.trim()?e.classList.remove("error"):(r=!1,e.classList.add("error"))});const s=e.querySelector('input[type="email"]');if(s&&s.value){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value)||(r=!1,s.classList.add("error"))}return r}function s(e,r){t.textContent=r,t.className="form-status "+e,t.scrollIntoView({behavior:"smooth",block:"nearest"})}e.addEventListener("submit",async function(i){i.preventDefault();const n=e.querySelector('button[type="submit"]'),a=n.textContent;if(n.disabled=!0,n.textContent="Invio in corso...",t.textContent="",t.className="form-status",!r(e))return n.disabled=!1,n.textContent=a,void s("error","Per favore, compila tutti i campi obbligatori.");try{const t=new FormData(e),r=await fetch(e.action,{method:"POST",body:t,headers:{Accept:"application/json"}});if(r.ok)s("success","Grazie per averci contattato! Ti risponderemo al più presto."),e.reset();else{(await r.json()).errors,s("error","Si è verificato un errore. Per favore riprova.")}}catch(e){s("error","Si è verificato un errore di connessione. Per favore riprova.")}finally{n.disabled=!1,n.textContent=a}});e.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("blur",function(){if(this.hasAttribute("required"))if("email"===this.type){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.value&&!e.test(this.value)?this.classList.add("error"):this.value&&this.classList.remove("error")}else this.value.trim()?this.classList.remove("error"):this.classList.add("error")}),e.addEventListener("input",function(){this.classList.contains("error")&&this.value.trim()&&this.classList.remove("error")})})}()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();